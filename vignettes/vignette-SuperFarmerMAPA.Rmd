---
title: "Pakiet SuperFarmerMAPA"
author: "Agnieszka Ciepielewska, Marek Wawreniuk, Pawel Gorniak"
date: "31 grudnia 2016"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{'Opis uzycia pakietu'}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

## Opis pakietu

Pakiet `SuperFarmerMAPA` jest pakietem symuluj¹cym rozgrywkê jednej osoby w grê "Super Farmer". Informacje dotycz¹ce gry i jej zasad mo¿na znaleŸæ pod adresem: 


- http://niewidzeprzeszkodzabrze.pl/wp-content/uploads/2016/02/SUPERFARMER.pdf


W ramach pakietu zosta³ stworzony silnik gry pozwalaj¹cy na przeprowadzenie rozgrywki z zastosowaniem ró¿nych strategii oraz obserwacjê statystyk czasu trwania gry w zale¿noœci od wybranej strategii. Dodatkow¹ funkcjonalnoœci¹ pakietu jest mo¿liwoœæ parametryzacji rozgrywki, co pozwala na modyfikowanie zasad gry. 


**Uwaga:** Wektor **max_stock** mo¿na zmieniaæ wy³¹cznie przy zastosowaniu strategii pochodz¹cych z pakietu `SuperFarmerMAPA`.

## Strategie dostêpne w ramach pakietu

Strategie dostêpne w ramach pakietu `SuperFarmerMAPA` to:

* strategia_rf
* strategia_EV
* strategia_HEV
* strategia_OLC
* strategia_OLC2

## Charakterystyka dostêpnych w pakiecie strategii

### strategia_rf (random forest)

Jest to strategia wykorzystuj¹ca uczenie maszynowe. Najlepszy z modeli uzyskanych w ramach trenowania zosta³ wgrany do pakietu jako zbiór danych. Jest on wykorzystywany do przewidywania, który ruch gracza bêdzie dla niego najkorzystniejszy. 

### strategy_EV (expected value)

Prosta strategia polegaj¹ca na tym, ¿e dla danego stanu stada gracza wyliczane s¹ wszystkie mo¿liwe stany, które mog¹ powstaæ przez wymianê. Nastêpnie dla tych stanów obliczana jest wartoœæ oczekiwana przyrostu za pomoc¹ expected_value i zwracany jest stan stada z najwy¿sz¹ wartoœci¹ oczekiwan¹. 

### strategy_HEV (Horse and Expected Value)

Taktyka bêd¹ca ma³ym rozszerzeniem poprzedniej strategii. Uwzglêdnia ona to, ¿e poprzednia nie bierze pod uwagê tego, ¿e wygrana partii nastêpuje po tym jak zdobêdziemy wszystkie zwierzêta, nie po tym jak bêdziemy mieli najwiêksz¹ wartoœæ stada w królikach. Dlatego po pierwsze skupiamy siê na zakupie reszty zwierz¹t jeœli mamy dwa konie. Potem na zakupie konia jeœ³i nast tylko na to staæ i konia nie mamy, nastêpnie jeœli staæ nas na wygranie gry, to kupujemy wszystkie zwierzêta po kolei, ale w taki sposób ¿eby nie pozbywaæ siê innych (¿eby nie wyzerowaæ jednego kosztem innego). Jeœ³i ¿aden z powy¿szych warunków nie zachodzi, to wracamy do strategii ev.

### strategy_OLC (One Last Chance)

Jeœli mamy ponad dwa konie, to tak jak poprzednio, jeœli nie to jeœli staæ nas na konia, to równie¿ jak poprzednio. W przeciwnym przypadku jeœli liczba królików przekracza number_of_rabbits_to_protect to chronimy je (czyli jeœli nie ma ma³ego psa, to go kupujemy, jeœli jest, to kupujemy œwiniê, bo to obni¿a liczbê królików (zauwa¿my, ¿e nie ma co trzymaæ wiêcej ni¿ 40 królików, bo przy potencjalnym wyrzuceniu królika, nasz przyrost jest ograniczany przez maksymaln¹ liczbê królików w stadzie g³ównym)), przy czym robimy to w przypadku jeœli nadal nas nie staæ na wygranie gry. Jeœli nas staæ, to wracamy do strategii poprzedniej (dla OLC jest to strategia_HEV, dla OLC2 - strategia_EV).

## Parametry umo¿liwiaj¹ce modyfikowanie rozgrywki

Jednym ze sposobów modyfikowania rozgrywki jest okreœlanie liczby zwierz¹t w stadzie z którym zaczynamy grê, jak równie¿ zmiana maksymalnej liczby zwierz¹t danego gatunku. Inne parametry na które wp³yw ma u¿ytkownik pakietu to zasady dotycz¹ce tego jakie zwierzêta zjada wilk i lis, jak równie¿ warunek wygrania gry.  

**Uwaga:** Kolejnoœæ zwierz¹t we wszystkich wektorach: 1-krolik, 2-owca, 3-swinia, 4-krowa, 5-kon, 6-maly pies, 7-duzy pies.


**Uwaga:** Wektor **max_stock** mo¿na zmieniaæ wy³¹cznie przy zastosowaniu strategii pochodz¹cych z pakietu `SuperFarmerMAPA`.


`zwierzeta_w_pudelku = c(100, 100, 100, 100, 100, 100, 100)`

`warunek_zwyciestwa = c(42, 1, 1, 1, 1, 1, 1)`

## Najwa¿niejsze funkcje pakietu

### badaj_gre()

Jest to funkcja wywo³uj¹ca grê z zadan¹ strategi¹ okreœlon¹ liczbê razy. Funkcja zwraca wektor liczby ruchów w kolejnych grach.


`badaj_gre(nazwa_strategii, liczba ruchów)`

`badaj_gre(strategia_rf, 10)`

 `[1] 182 130  74  28  25  25  39  56  34  44`

### gra()

Funkcja rozgrywaj¹ca jedn¹ grê w Super Farmera przy zadanej strategii i zwraca liczbê tur, która by³a potrzebna do wygranej. Funkcja ta wykorzystuje funkcje **reproduction()** oraz **win()** .

Podstawowym argumentem funkcji jest strategia, któr¹ chcemy wykorzystaæ w danej rozgrywce. 


`gra(strategia)`

`gra(strategia_rf)`

`[1] 25`

 
